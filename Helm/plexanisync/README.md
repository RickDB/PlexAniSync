# plexanisync helm chart

## Values

| Name                       | Description                                                                                                                             | Default Value                                                                                                                                                                                                                                                                                        | Example                                                                                                                                                                                                                                                                                                                                                                      |
| -------------------------- | --------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `nameOverride`             | String to partially override plexanisync.fullname template (will maintain the release name)                                             | `""`                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                              |
| `fullnameOverride`         | String to fully override plexanisync.fullname template                                                                                  | `""`                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                              |
| `namespaceOverride`        | String to fully override common.names.namespace                                                                                         | `""`                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                              |
| `custom_mappings`          | Contents of custom_mappings.yaml recomended multiline yaml string.                                                                      | `""`                                                                                                                                                                                                                                                                                                 | <pre>custom_mappings: \|<br>&nbsp;&nbsp;&nbsp;&nbsp;remote-urls:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- https://raw.githubusercontent.com/RickDB/PlexAniSync-Custom-Mappings/main/series-tvdb.en.yaml<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- https://raw.githubusercontent.com/RickDB/PlexAniSync-Custom-Mappings/main/movies-tmdb.en.yaml</pre> |
| `envVars`                  | Additional EnvVars to define in the plexanisync container                                                                               | `[]`                                                                                                                                                                                                                                                                                                 | <pre>EnvVars:<br>&nbsp;&nbsp;- name: KEY<br>&nbsp;&nbsp;&nbsp;&nbsp;value: "VALUE"</pre>                                                                                                                                                                                                                                                                                     |
| `image`                    | container image to use                                                                                                                  | `ghcr.io/rickdb/plexanisync:latest`                                                                                                                                                                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                              |
| `resources`                | plexanisync container resource requests/limits                                                                                          | <pre>resources:<br>&nbsp;&nbsp;limits:<br>&nbsp;&nbsp;&nbsp;&nbsp;cpu: '1'<br>&nbsp;&nbsp;&nbsp;&nbsp;memory: 1Gi<br>&nbsp;&nbsp;requests:<br>&nbsp;&nbsp;&nbsp;&nbsp;cpu: '100m'<br>&nbsp;&nbsp;&nbsp;&nbsp;memory: 256Mi                                                                           |                                                                                                                                                                                                                                                                                                                                                                              |
| `settings`                 | [plexanisync environment variable settings](https://github.com/RickDB/PlexAniSync/tree/master/Docker/PlexAniSync#environment-variables) | <pre>settings:<br>&nbsp;&nbsp;plex_section:&nbsp;Anime\|Anime&nbsp;Movies<br>&nbsp;&nbsp;plex_url:<br>&nbsp;&nbsp;ani_username:<br>&nbsp;&nbsp;plex_episode_count_priority:<br>&nbsp;&nbsp;sync_ratings:<br>&nbsp;&nbsp;skip_list_update:&nbsp;&nbsp;<br>&nbsp;&nbsp;schedule:</pre>                 | <pre>settings:<br>&nbsp;&nbsp;plex_section:&nbsp;Anime\|Anime&nbsp;Movies<br>&nbsp;&nbsp;plex_url:&nbsp;https://plex.tld.org<br>&nbsp;&nbsp;ani_username:&nbsp;username<br>&nbsp;&nbsp;plex_episode_count_priority:&nbsp;true<br>&nbsp;&nbsp;sync_ratings:&nbsp;false<br>&nbsp;&nbsp;skip_list_update:&nbsp;true<br>&nbsp;&nbsp;schedule:&nbsp;"* */1 * * *"</pre>           |
| `settings.schedule`        | Cron schedule, see [crontab.guru](https://crontab.guru/#*_*/1_*_*_*) for more information                                               | `'* */1 * * *'`                                                                                                                                                                                                                                                                                      |
| `tokens`                   | plex and anilist tokens                                                                                                                 | <pre>tokens:<br>&nbsp;&nbsp;ani:<br>&nbsp;&nbsp;plex:</pre>                                                                                                                                                                                                                                          | <pre>tokens:<br>&nbsp;&nbsp;ani: ani-token<br>&nbsp;&nbsp;plex: plex-token</pre>                                                                                                                                                                                                                                                                                             |
| `podSecurityContext`       | [pod security context](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.29/#securitycontext-v1-core)                    | `{}`                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                              |
| `containerSecurityContext` | [container security context](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.29/#securitycontext-v1-core)              | `{}`                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                              |
| `volumes`                  | Additional [volumes](https://kubernetes.io/docs/concepts/storage/volumes/) to define in the pod                                         | `[]`                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                              |
| `volumeMounts`             | volumeMounts for additional volumes                                                                                                     | `[]`                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                              |
| `cronjob`                  | CronJob configuration, most users will most likely omit these, as the defaults should be sufficient                                     | <pre>cronjob:<br>&nbsp;&nbsp;concurrencyPolicy:&nbsp;Forbid<br>&nbsp;&nbsp;failedJobsHistoryLimit:&nbsp;2<br>&nbsp;&nbsp;startingDeadlineSeconds:&nbsp;300<br>&nbsp;&nbsp;successfulJobsHistoryLimit:&nbsp;1</pre> |
### Settings

* If an optional setting is not defined, the environment variable will not be set. This will then use the plexanisync container image default for that particular setting

* This chart does not provide *native* support for the following plexanisync settings.
  * SETTINGS_FILE
  * LOG_FAILED_MATCHES

  * It is possible to enable these features using a combination of the envVars, volumes, and volumeMounts

#### Example values.yaml

```yaml
custom_mappings: |
  remote-urls:
    - https://raw.githubusercontent.com/RickDB/PlexAniSync-Custom-Mappings/main/series-tvdb.en.yaml
  entries:
    - title: The Rising of the Shield Hero
      seasons:
        - season: 1
          anilist-id: 99263

settings:
  plex_section: Anime|Anime Movies
  plex_url: https://plex.tld.org
  ani_username: UserName
  plex_episode_count_priority: true
  sync_ratings: false
  skip_list_update: true
  schedule: "* */1 * * *"

tokens:
  ani: ani-token
  plex: plex-token

```
